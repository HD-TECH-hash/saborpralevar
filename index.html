<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Sabor pra Levar â€” NFC</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#531b61">

<style>
:root{
  --purple:#531b61;
  --lime:#d9f99d;
  --lime-strong:#bef264;
  --ok:#16a34a;
  --danger:#ef4444;
  --muted:#64748b;
  --bg:#f7fafc;
}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter;
  background:var(--bg);
  color:#0b1324;
}
header{
  background:var(--purple);
  color:#fff;
  padding:14px;
  display:flex;
  align-items:center;
  gap:12px;
}
header img{height:42px;width:auto;border-radius:6px}
header h1{font-size:18px;margin:0;font-weight:700}
main{
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:18px;
}
.card{
  background:#fff;
  border-radius:14px;
  box-shadow:0 8px 18px rgba(0,0,0,.08);
  padding:20px;
}
.card h2{margin:0 0 12px 0;color:var(--purple)}
input{
  width:100%;
  padding:12px;
  border:1px solid #ddd;
  border-radius:10px;
  font-size:15px;
}
.btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  margin-top:10px;
}
.btn.primary{background:var(--purple);color:#fff}
.btn.ok{background:var(--ok);color:#fff}
.btn.danger{background:var(--danger);color:#fff}
.btn.lime{background:linear-gradient(90deg,#7ee787,#b6f18c);color:#05350a}
.note{font-size:13px;color:var(--muted);margin-top:10px}
.toast{
  position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
  background:var(--lime-strong);padding:12px 18px;border-radius:12px;
  font-weight:700;color:#05350a;display:none;z-index:200;
}
</style>
</head>
<body>
<header>
  <img src="sabor.png" alt="Sabor pra Levar">
  <h1>Sabor pra Levar â€” NFC</h1>
</header>

<main>
  <div class="card">
    <h2>Pagamento por cartÃ£o NFC</h2>
    <p>Aproxime a tag NFC no celular ou digite o UID manualmente.</p>

    <button id="btnNFC" class="btn lime">ðŸ“¶ Aproxime o cartÃ£o (NFC)</button>

    <input id="tagManual" placeholder="UID manual (ex: 04A1B29C)">
    <button class="btn primary" onclick="enviarUID()">Enviar UID</button>

    <div class="note">NFC nÃ£o suportado neste navegador. Digite o UID manual.<br>
    ðŸ’¡ Dica: adicione esta pÃ¡gina Ã  tela inicial para usar como app.</div>
  </div>
</main>

<div id="toast" class="toast">Mensagem</div>

<script>
// toast
function showToast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;
  t.style.display='block';
  setTimeout(()=>t.style.display='none',3000);
}

// leitura NFC
const nfcBtn=document.getElementById('btnNFC');
if('NDEFReader' in window){
  nfcBtn.onclick=async ()=>{
    try{
      const reader=new NDEFReader();
      await reader.scan();
      reader.onreading=(ev)=>{
        const uid=ev.serialNumber||'';
        document.getElementById('tagManual').value=uid.toUpperCase();
        showToast("UID lido: "+uid);
      };
    }catch(err){
      showToast("Erro NFC: "+err);
    }
  };
}else{
  nfcBtn.onclick=()=>showToast("NFC nÃ£o suportado. Use UID manual.");
}

// envio UID
function enviarUID(){
  const uid=document.getElementById('tagManual').value.trim();
  if(!uid){showToast("Digite ou aproxime a tag");return;}
  // aqui vocÃª pode chamar seu endpoint GAS, ex:
  // fetch("https://script.google.com/macros/s/AKfycbwo.../exec?tagUID="+uid)
  showToast("UID enviado: "+uid);
}
</script>

<footer style="text-align:center;padding:14px;color:#fff;background:var(--purple);font-weight:700">
  Desenvolvido por Alexandre Cavalcante
</footer>
</body>
</html>
